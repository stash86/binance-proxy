# Binance Proxy Configuration
# All settings can be overridden by environment variables with BPX_ prefix

# Server Configuration
BPX_SERVER_PORT_SPOT=8090
BPX_SERVER_PORT_FUTURES=8091
BPX_SERVER_READ_TIMEOUT=60s          # Increased from 30s
BPX_SERVER_WRITE_TIMEOUT=60s         # Increased from 30s
BPX_SERVER_IDLE_TIMEOUT=300s         # Increased from 120s
BPX_SERVER_MAX_HEADER_SIZE=8192

# Request timeout for upstream Binance API calls
BPX_REQUEST_TIMEOUT=45s              # New setting for API calls

# Market Configuration
BPX_MARKETS_DISABLE_SPOT=false
BPX_MARKETS_DISABLE_FUTURES=false

# WebSocket Configuration
BPX_WS_RECONNECT_DELAY=1s
BPX_WS_MAX_RECONNECT_DELAY=60s
BPX_WS_PING_INTERVAL=30s
BPX_WS_PONG_TIMEOUT=60s
BPX_WS_BUFFER_SIZE=4096

# Rate Limiting Configuration
BPX_RATE_SPOT_RPS=20
BPX_RATE_SPOT_BURST=1200
BPX_RATE_FUTURES_RPS=40
BPX_RATE_FUTURES_BURST=2400

# Logging Configuration
BPX_LOG_LEVEL=debug                  # Changed from info to debug
BPX_LOG_FORMAT=text
BPX_LOG_OUTPUT=stdout
BPX_LOG_DISABLE_COLORS=false
BPX_LOG_ALWAYS_SHOW_FORWARDS=true    # Changed to true for debugging

# Feature Configuration
BPX_FEAT_DISABLE_FAKE_CANDLES=false
BPX_FEAT_ENABLE_METRICS=true
BPX_FEAT_METRICS_PORT=8092
BPX_FEAT_ENABLE_PPROF=false
BPX_FEAT_CACHE_EXPIRY=2m

# Auto Recovery Configuration
BPX_RECOVERY_ENABLED=true
BPX_RECOVERY_ERROR_THRESHOLD=10
BPX_RECOVERY_ERROR_WINDOW=5m
BPX_RECOVERY_RESTART_COOLDOWN=2m
BPX_RECOVERY_HEALTH_CHECK_INTERVAL=30s

# Memory Management Configuration
BPX_MEMORY_LIMIT_MB=128
BPX_MEMORY_GC_PERCENT=50
BPX_MEMORY_BUFFER_SIZE=4096
BPX_MEMORY_MAX_BUFFERS=100
BPX_MEMORY_CLEANUP_INTERVAL=5m
BPX_MEMORY_STRING_POOL_SIZE=1000
BPX_MEMORY_ENDPOINT_LIMIT=100
BPX_MEMORY_ERROR_TYPE_LIMIT=50
